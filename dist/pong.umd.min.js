!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.Pong=i()}(this,function(){"use strict";class t{constructor(t=0,i=0,h=1,s=1,e=100,l=0){this.x=t,this.y=i,this.width=h,this.height=s,this.speed=e,this.angle=l}get left(){return this.x-this.width/2}get right(){return this.x+this.width/2}get top(){return this.y-this.height/2}get bottom(){return this.y+this.height/2}set top(t){this.y=t+this.height/2}set bottom(t){this.y=t-this.height/2}set left(t){this.x=t+this.width/2}set right(t){this.x=t-this.width/2}}class i extends t{constructor(t,i,h=1,s=1){super(t,i,h,s),this.direction=0}up(){this.direction=-1}down(){this.direction=1}release(){this.direction=0}update(t){this.y+=this.direction*this.speed*t}}class h extends t{constructor(t,i,h,s,e,l){super(t,i,h,s,e,l)}update(t=1){this.x+=this.speed*Math.cos(this.angle)*t,this.y+=this.speed*Math.sin(this.angle)*-1*t}}return class{constructor({width:t=400,height:s=400,winningScore:e=5,scoreA:l=0,scoreB:d=0,paddleA:o=new i(t/20,s/2,t/100,s/4),paddleB:a=new i(t-t/20,s/2,t/100,s/4),ball:n=new h(t/2,s/2,t/100,t/100,400,0)}={}){this.width=t,this.height=s,this.winningScore=e,this.scoreA=l,this.scoreB=d,this.paddleA=o,this.paddleB=a,this.ball=n,this.endOfSet=!1,this.endOfMatch=!1}update(t=1){this.paddleA.update(t),this.paddleB.update(t),this.endOfMatch||(this.ball.update(t),this.resolveEdgeCollision(),this.resolvePaddleCollision(),this.checkEndOfSet())}resolveEdgeCollision(){this.ball.top<0?(this.ball.top=0,this.ball.angle*=-1):this.ball.bottom>this.width&&(this.ball.bottom=this.height,this.ball.angle*=-1)}resolvePaddleCollision(){this.endOfSet||(this.endOfSet=!1,(this.ball.left<this.paddleA.right||this.ball.right>this.paddleB.left)&&(this.endOfSet=!0),this.ball.left<this.paddleA.right&&this.ball.bottom>this.paddleA.top&&this.ball.top<this.paddleA.bottom?(this.ball.left=this.paddleA.right,this.ball.angle-=Math.PI,this.endOfSet=!1):this.ball.right>this.paddleB.left&&this.ball.bottom>this.paddleB.top&&this.ball.top<this.paddleB.bottom&&(this.ball.right=this.paddleB.left,this.ball.angle+=Math.PI,this.endOfSet=!1))}scored(t){"A"==t&&this.scoreA++,"B"==t&&this.scoreB++,(this.scoreA>=this.winningScore||this.scoreB>=this.winningScore)&&(this.endOfMatch=!0)}checkEndOfSet(){this.endOfSet&&(this.ball.right<0?this.scored("B"):this.ball.left>this.width&&this.scored("A"),(this.ball.right<0||this.ball.left>this.width)&&this.resetSet())}resetSet(){let t=Math.random()*(Math.PI/4);t*=Math.random()>.5?1:-1,t+=Math.random()>.5?0:Math.PI,this.ball=new h(this.width/2,this.height/2,this.width/100,this.width/100,400,t),this.endOfSet=!1}resetMatch(){this.endOfMatch=!1,this.scoreA=0,this.scoreB=0,this.resetSet()}}});
